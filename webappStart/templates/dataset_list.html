{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <h2>アップロード履歴</h2>
    <table class="table table-striped mt-3">
        <thead>
            <tr>
                <th>ID</th>
                <th>ファイル名</th>
                <th>アップロード日時</th>
            </tr>
        </thead>
        <tbody>
            {% for d in datasets %}
            <tr>
                <td>{{ d.id }}</td>
                <td>{{ d.name }}</td>
                <td>{{ d.uploaded_at|date:"Y-m-d H:i"}}</td>
                <!--削除機能-->
                <td>
                <a href="{% url 'dataset_delete' d.pk %}" class="btn btn-danger btn-sm ms-2"
                onclick="return confirm('本当に削除しますか')">
                削除
                </a>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="3">まだアップロードはありません</td></tr>
            {% endfor %}

        {% for dataset in datasets %}
            <li>
                <a href="{% url 'dataset_detail' dataset.pk %}">
                    {{ dataset.name }}
                </a>
                ({{ dataset.uploaded_at }})
            </li>
        {% endfor %}    
        </tbody>
    </table>
</div>
{% endblock %}